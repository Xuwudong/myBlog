---
title: es
date: 2022-11-19 18:51:13
tags:
- es
- 搜索
- 中间件
categories:
- es
- 搜索
- 中间件
---
### 倒排索引
### 分布式

#### 分片
* 索引分散保存在一个或多个分片上，索引实际上是指向一个或多个物理分片的逻辑命名空间
* 一个分片是一个Lucene实例，以及它本事就是一个完整的搜索引擎
* 文档被存储和索引到分片内，但应用程序是直接合索引而不是分片进行交互
* es是利用分片将数据分发到集群内各个节点上

### 副本
* 分片有主分片和副本分片之分，一个副本分片只是一个主分片的拷贝，高可用的保证
### 存储
> 写操作需要所有副本都写成功后才返回？
### 搜索

#### 游标查询（Scroll）
* **<font color=#FF000>可以解决深分页问题</font>**。获取某个时间点的快照，在快照过期前不需要重复查询，也不用对结果做全局排序
* 过期前数据更新快照不会更新
